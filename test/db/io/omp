NAME=iomaps_va
FILE=--
CMDS=<<EOF
e io.va=true
o malloc://512
p8 64
o malloc://32 0x10 rw
oml~?
ol~?
p8 64
e io.va=false
wox 0x90
e io.va=1
p8 64
EOF
EXPECT=<<EOF
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2
2
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000909090909090909090909090909090909090909090909090909090909090909000000000000000000000000000000000
EOF
RUN

NAME=omp
FILE=malloc://32
CMDS=<<EOF
o malloc://32 0x10 rw
b 48
p8
wox 0x90
p8
omp 1 
p8
wox 0xff
omp 2
p8
EOF
EXPECT=<<EOF
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
909090909090909090909090909090909090909090909090909090909090909090909090909090909090909090909090
909090909090909090909090909090900000000000000000000000000000000090909090909090909090909090909090
6f6f6f6f6f6f6f6f6f6f6f6f6f6f6f6f909090909090909090909090909090906f6f6f6f6f6f6f6f6f6f6f6f6f6f6f6f
EOF
RUN

NAME=omp 2
FILE=malloc://3
CMDS=<<EOF
b 3
wb 90
p8
o malloc://1 1 rw
p8
omp 1
p8
EOF
EXPECT=<<EOF
909090
900090
909090
EOF
RUN

NAME=omp 3
FILE=--
CMDS=<<EOF
o malloc://8 0 rw
o malloc://12 4 rw
oml~?
b 16
p8
omp 1
wox 90
p8
omp 2
p8
EOF
EXPECT=<<EOF
2
00000000000000000000000000000000
90909090909090909090909090909090
90909090000000009090909090909090
EOF
RUN
